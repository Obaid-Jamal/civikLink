<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Admin Dashboard - CivicLink Portal</title>
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">

  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=" crossorigin=""/>
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js" integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo=" crossorigin=""></script>
  
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <div class="gov-header">
    <div class="gov-info">
      <div class="gov-logo-section">
        <button class="menu-toggle" onclick="toggleNavigationMenu()" id="navMenuToggle">
          <div class="hamburger">
            <span></span>
            <span></span>
            <span></span>
          </div>
        </button>
        <div class="menu-dropdown" id="navMenu">
          <div class="dropdown-section">
            <div class="dropdown-title">Navigation</div>
            <div class="dropdown-nav">
              <a href="#allReports" class="dropdown-nav-item active" data-section="allReports" id="allReportsTabDropdown">
                <i class="fas fa-clipboard-list"></i>
                <span>All Reports</span>
              </a>
              <a href="#analytics" class="dropdown-nav-item" data-section="analytics" id="analyticsTabDropdown">
                <i class="fas fa-chart-bar"></i>
                <span>Analytics</span>
              </a>
              <a href="#users" class="dropdown-nav-item" data-section="users" id="usersTabDropdown">
                <i class="fas fa-users"></i>
                <span>User Management</span>
              </a>
               <a href="#leaderboard" class="dropdown-nav-item" data-section="leaderboard" id="leaderboardTabDropdown">
                <i class="fas fa-trophy"></i>
                <span>Leaderboard</span>
              </a>
              <a href="#issueMap" class="dropdown-nav-item" data-section="issueMap" id="issueMapTabDropdown">
                <i class="fas fa-map-location-dot"></i>
                <span>Issue Map</span>
              </a>
              <a href="#management" class="dropdown-nav-item" data-section="management" id="managementTabDropdown">
                <i class="fas fa-cogs"></i>
                <span>Management</span>
              </a>
            </div>
          </div>
          <div class="dropdown-section">
            <div class="dropdown-title">Account</div>
            <div id="currentUserInfo" class="dropdown-nav-item" style="font-weight: 500;">
              </div>
            <div class="dropdown-nav">
              <a href="#" class="dropdown-nav-item" onclick="logout()">
                <i class="fas fa-sign-out-alt"></i>
                <span id="logoutTextDropdown">Logout</span>
              </a>
            </div>
          </div>
        </div>
        <div class="brand-main">
          <div class="jharkhand-emblem">CL</div>
          <div class="brand-text">
            <div class="brand-title">CivicLink | Citizen Reporting Platform</div>
          </div>
        </div>
      </div>
      <div class="support-info">
<span>üìû Support: 1800-123-4567 | üìß arib7488@gmail.com</span>
        <div class="notification-container">
            <button class="notification-bell" id="notificationBell">
                <i class="fas fa-bell"></i>
                <span class="notification-badge" id="notificationBadge" style="display: none;">0</span>
            </button>
            <div class="notification-panel" id="notificationPanel">
                <div class="notification-header">Notifications</div>
                <div id="notificationList">
                    </div>
            </div>
        </div>

        <button class="btn btn-secondary" onclick="toggleLanguage()" id="languageToggle" style="padding: 0.3rem 0.6rem; font-size: 0.75rem;">
          <i class="fas fa-language"></i>
          <span id="langText">English</span>
        </button>
      </div>
    </div>
  </div>

  <div class="particles" id="particles"></div>

  <div id="adminDashboard" class="dashboard active">

    <div class="content-container">
      <div id="allReports" class="section active">
        <div class="card">
          <div class="card-header">
            <div class="card-icon">
              <i class="fas fa-clipboard-list"></i>
            </div>
            <div>
              <h2 class="card-title" id="reportsTitle">All Reported Issues</h2>
              <p style="color: #666; font-size: 0.875rem; margin-top: 0.25rem;" id="reportsSubtitle">‡§∏‡§≠‡•Ä ‡§∞‡§ø‡§™‡•ã‡§∞‡•ç‡§ü ‡§ï‡•Ä ‡§ó‡§à ‡§∏‡§Æ‡§∏‡•ç‡§Ø‡§æ‡§è‡§Ç</p>
            </div>
          </div>
          
          <div class="filter-controls">
            <select class="filter-select" id="statusFilter">
              <option value="all">All Status / ‡§∏‡§≠‡•Ä ‡§∏‡•ç‡§•‡§ø‡§§‡§ø</option>
              <option value="submitted">Submitted / ‡§™‡•ç‡§∞‡§∏‡•ç‡§§‡•Å‡§§</option>
              <option value="in progress">In Progress / ‡§™‡•ç‡§∞‡§ó‡§§‡§ø ‡§Æ‡•á‡§Ç</option>
              <option value="resolved">Resolved / ‡§π‡§≤</option>
              <option value="completed">Completed / ‡§™‡•Ç‡§∞‡•ç‡§£</option>
            </select>
            <select class="filter-select" id="categoryFilterAdmin">
              <option value="all">All Categories / ‡§∏‡§≠‡•Ä ‡§∂‡•ç‡§∞‡•á‡§£‡§ø‡§Ø‡§æ‡§Ç</option>
              <option value="roads">Roads & Transportation</option>
              <option value="lighting">Lighting & Electricity</option>
              <option value="water">Water & Drainage</option>
              <option value="waste">Waste & Sanitation</option>
              <option value="safety">Public Safety</option>
            </select>
          </div>
          
          <div class="table-container">
            <table class="data-table">
              <thead>
                <tr>
                  <th>ID</th>
                  <th>Description & Location</th>
                  <th>Submitted By</th>
                  <th>Category</th>
                  <th>Priority</th>
                  <th>Status</th>
                  <th>Photos</th>
                  <th>Date</th>
                  <th>Actions</th>
                </tr>
              </thead>
              <tbody id="allReportsTable">
                </tbody>
            </table>
          </div>
        </div>
      </div>
      
      <div id="leaderboard" class="section">
        <div class="card">
            <div class="card-header">
                <div class="card-icon"><i class="fas fa-trophy"></i></div>
                <div>
                    <h2 class="card-title">Civic Champions Leaderboard</h2>
                    <p style="color: #666; font-size: 0.875rem; margin-top: 0.25rem;">Top reporting citizens</p>
                </div>
            </div>
            <div class="table-container">
                <table class="data-table">
                    <thead>
                        <tr>
                            <th>Rank</th>
                            <th>Citizen</th>
                            <th>Points</th>
                            <th>Reports</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody id="adminLeaderboardTable">
                    </tbody>
                </table>
            </div>
        </div>
      </div>

      <div id="analytics" class="section">
        <div class="analytics-grid">
          <div class="analytics-card">
            <div class="analytics-icon" style="background: linear-gradient(135deg, #FF8C00 0%, #DC143C 100%);">
              <i class="fas fa-clipboard-list"></i>
            </div>
            <div class="analytics-number" id="totalReports">0</div>
            <div class="analytics-label">Total Reports / ‡§ï‡•Å‡§≤ ‡§∞‡§ø‡§™‡•ã‡§∞‡•ç‡§ü</div>
          </div>
          <div class="analytics-card">
            <div class="analytics-icon" style="background: linear-gradient(135deg, #10b981 0%, #059669 100%);">
              <i class="fas fa-check-circle"></i>
            </div>
            <div class="analytics-number" id="resolvedReports">0</div>
            <div class="analytics-label">Resolved / ‡§π‡§≤</div>
          </div>
          <div class="analytics-card">
            <div class="analytics-icon" style="background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%);">
              <i class="fas fa-hourglass-half"></i>
            </div>
            <div class="analytics-number" id="inProgressReports">0</div>
            <div class="analytics-label">In Progress / ‡§™‡•ç‡§∞‡§ó‡§§‡§ø ‡§Æ‡•á‡§Ç</div>
          </div>
          <div class="analytics-card">
            <div class="analytics-icon" style="background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%);">
              <i class="fas fa-inbox"></i>
            </div>
            <div class="analytics-number" id="pendingReports">0</div>
            <div class="analytics-label">Pending / ‡§≤‡§Ç‡§¨‡§ø‡§§</div>
          </div>
        </div>
        
        <div class="card">
          <div class="card-header">
            <div class="card-icon">
              <i class="fas fa-chart-pie"></i>
            </div>
            <div>
              <h2 class="card-title">Reports by Category</h2>
              <p style="color: #666; font-size: 0.875rem; margin-top: 0.25rem;">Breakdown of issues based on category</p>
            </div>
          </div>
          <div style="height: 350px; position: relative;">
            <canvas id="adminCategoryChart"></canvas>
          </div>
        </div>
      </div>

      <div id="management" class="section">
        <div class="card">
          <div class="card-header">
            <div class="card-icon">
              <i class="fas fa-cogs"></i>
            </div>
            <div>
              <h2 class="card-title">System Management</h2>
              <p style="color: #666; font-size: 0.875rem; margin-top: 0.25rem;">‡§∏‡§ø‡§∏‡•ç‡§ü‡§Æ ‡§™‡•ç‡§∞‡§¨‡§Ç‡§ß‡§®</p>
            </div>
          </div>
          <div style="text-align: center; padding: 2rem; color: #718096;">
            <i class="fas fa-tools fa-3x" style="margin-bottom: 1rem; color: #FF8C00;"></i>
            <p><strong>Advanced Management Features</strong></p>
            <p>‡§â‡§®‡•ç‡§®‡§§ ‡§™‡•ç‡§∞‡§¨‡§Ç‡§ß‡§® ‡§∏‡•Å‡§µ‡§ø‡§ß‡§æ‡§è‡§Ç ‡§ú‡§≤‡•ç‡§¶ ‡§Ü ‡§∞‡§π‡•Ä ‡§π‡•à‡§Ç...</p>
          </div>
        </div>
      </div>

      <div id="users" class="section">
        <div class="card">
          <div class="card-header">
            <div class="card-icon">
              <i class="fas fa-users"></i>
            </div>
            <div>
              <h2 class="card-title">User Management</h2>
              <p style="color: #666; font-size: 0.875rem; margin-top: 0.25rem;">‡§â‡§™‡§Ø‡•ã‡§ó‡§ï‡§∞‡•ç‡§§‡§æ ‡§™‡•ç‡§∞‡§¨‡§Ç‡§ß‡§®</p>
            </div>
          </div>
          
          <div class="filter-controls">
            <select class="filter-select" id="userIssueFilter">
              <option value="all">All Users / ‡§∏‡§≠‡•Ä ‡§â‡§™‡§Ø‡•ã‡§ó‡§ï‡§∞‡•ç‡§§‡§æ</option>
              <option value="active">Active Users (>0 issues)</option>
              <option value="inactive">New Users (0 issues)</option>
            </select>
          </div>
          
          <div class="table-container">
            <table class="data-table">
              <thead id="usersTableHead">
                <tr>
                  <th>User / ‡§â‡§™‡§Ø‡•ã‡§ó‡§ï‡§∞‡•ç‡§§‡§æ</th>
                  <th>District / ‡§ú‡§ø‡§≤‡§æ</th>
                  <th>Activity / ‡§ó‡§§‡§ø‡§µ‡§ø‡§ß‡§ø</th>
                  <th>Contact / ‡§∏‡§Ç‡§™‡§∞‡•ç‡§ï</th>
                  <th>Registered / ‡§™‡§Ç‡§ú‡•Ä‡§ï‡•É‡§§</th>
                  <th>Actions / ‡§ï‡§æ‡§∞‡•ç‡§Ø</th>
                </tr>
              </thead>
              <tbody id="usersTable">
                </tbody>
            </table>
          </div>
        </div>
      </div>
      
      <div id="issueMap" class="section">
        <div class="card">
            <div class="card-header">
                <div class="card-icon">
                    <i class="fas fa-map-location-dot"></i>
                </div>
                <div>
                    <h2 class="card-title" id="mapTitle">Issue Map</h2>
                    <p style="color: #666; font-size: 0.875rem; margin-top: 0.25rem;">Geographic distribution of all reported issues</p>
                </div>
            </div>
            <div id="admin-leaflet-map" style="height: 500px; border-radius: 8px; z-index: 1;"></div>
        </div>
      </div>

    </div>
  </div>
  
  <div id="userModal" class="modal-overlay" style="display: none;">
    <div class="modal-content">
        <div class="modal-header">
            <h2>User Details</h2>
            <button id="modalCloseBtn" class="modal-close">&times;</button>
        </div>
        <div class="modal-body">
            <p><strong>Full Name:</strong> <span id="modal-fullName"></span></p>
            <p><strong>Username:</strong> <span id="modal-username"></span></p>
            <p><strong>Email:</strong> <span id="modal-email"></span></p>
            <p><strong>Phone:</strong> <span id="modal-phone"></span></p>
            <p><strong>Aadhar Number:</strong> <span id="modal-aadhar"></span></p>
            <p><strong>District:</strong> <span id="modal-district"></span></p>
            <p><strong>Registration Date:</strong> <span id="modal-regDate"></span></p>
        </div>
    </div>
  </div>

  <div id="toastContainer"></div>

  <script src="script.js"></script>
</body>
</html>